import{jsx as e,jsxs as t}from"react/jsx-runtime";import*as n from"react";import{isValidElement as r,cloneElement as o,useLayoutEffect as i,useEffect as a,useRef as s,useState as c}from"react";import*as l from"react-dom";import{getRootBlockElement as u,useYooptaEditor as f,findPluginBlockByPath as d,UI as p,Blocks as h,HOTKEYS as g}from"@yoopta/editor";var m;function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(null,arguments)}var y;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(null,arguments)}var b;function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(null,arguments)}var _;function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(null,arguments)}var k;function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(null,arguments)}var j;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(null,arguments)}var S,R,C;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(null,arguments)}var L,M;function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(null,arguments)}var N;function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(null,arguments)}var F;function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(null,arguments)}var q;function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(null,arguments)}var V;function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(null,arguments)}var I,H,Z;function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(null,arguments)}var $,J;function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U.apply(null,arguments)}var X,Y;function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(null,arguments)}var Q;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(null,arguments)}const te={Paragraph:function(e){return n.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"text_svg__lucide text_svg__lucide-a-large-small"},e),m||(m=n.createElement("path",{d:"M21 14h-5M16 16v-3.5a2.5 2.5 0 0 1 5 0V16M4.5 13h6M3 16l4.5-9 4.5 9"})))},HeadingOne:function(e){return n.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"heading-one_svg__lucide heading-one_svg__lucide-heading-1"},e),y||(y=n.createElement("path",{d:"M4 12h8M4 18V6M12 18V6M17 12l3-2v8"})))},HeadingTwo:function(e){return n.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"heading-two_svg__lucide heading-two_svg__lucide-heading-2"},e),b||(b=n.createElement("path",{d:"M4 12h8M4 18V6M12 18V6M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"})))},HeadingThree:function(e){return n.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"heading-three_svg__lucide heading-three_svg__lucide-heading-3"},e),_||(_=n.createElement("path",{d:"M4 12h8M4 18V6M12 18V6M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"})))},Code:function(e){return n.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"code_svg__lucide code_svg__lucide-braces"},e),k||(k=n.createElement("path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"})))},Embed:function(e){return n.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"embed_svg__lucide embed_svg__lucide-code"},e),j||(j=n.createElement("path",{d:"m16 18 6-6-6-6M8 6l-6 6 6 6"})))},Image:function(e){return n.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"image_svg__lucide image_svg__lucide-image"},e),S||(S=n.createElement("rect",{width:18,height:18,x:3,y:3,rx:2,ry:2})),R||(R=n.createElement("circle",{cx:9,cy:9,r:2})),C||(C=n.createElement("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})))},Video:function(e){return n.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"video_svg__lucide video_svg__lucide-square-play"},e),L||(L=n.createElement("rect",{width:18,height:18,x:3,y:3,rx:2})),M||(M=n.createElement("path",{d:"m9 8 6 4-6 4Z"})))},Blockquote:function(e){return n.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"blockquote_svg__lucide blockquote_svg__lucide-quote"},e),N||(N=n.createElement("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1zM15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"})))},TodoList:function(e){return n.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"todo-list_svg__lucide todo-list_svg__lucide-list-checks"},e),F||(F=n.createElement("path",{d:"m3 17 2 2 4-4M3 7l2 2 4-4M13 6h8M13 12h8M13 18h8"})))},BulletedList:function(e){return n.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"bulleted-list_svg__lucide bulleted-list_svg__lucide-list"},e),q||(q=n.createElement("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})))},NumberedList:function(e){return n.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"numbered-list_svg__lucide numbered-list_svg__lucide-list-ordered"},e),V||(V=n.createElement("path",{d:"M10 6h11M10 12h11M10 18h11M4 6h1v4M4 10h2M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})))},Table:function(e){return n.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"table_svg__lucide table_svg__lucide-table"},e),I||(I=n.createElement("path",{d:"M12 3v18"})),H||(H=n.createElement("rect",{width:18,height:18,x:3,y:3,rx:2})),Z||(Z=n.createElement("path",{d:"M3 9h18M3 15h18"})))},Callout:function(e){return n.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"callout_svg__lucide callout_svg__lucide-highlighter"},e),$||($=n.createElement("path",{d:"m9 11-6 6v3h9l3-3"})),J||(J=n.createElement("path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"})))},File:function(e){return n.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"file_svg__lucide file_svg__lucide-file"},e),X||(X=n.createElement("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"})),Y||(Y=n.createElement("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})))},Divider:function(e){return n.createElement("svg",ee({width:15,height:15,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Q||(Q=n.createElement("path",{d:"M2 7.5a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10a.5.5 0 0 1-.5-.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})))}},ne=({actions:n,editor:i,empty:a,getItemProps:s,getRootProps:c,view:l="default"})=>{const u="small"===l,f={maxWidth:u?"200px":"270px"},d={minWidth:u?"28px":"40px",width:u?"28px":"40px",height:u?"28px":"40px"},p={transform:u?"scale(0.75)":"scale(1)"},h=t=>t?"string"==typeof t?e("img",{src:t,alt:"icon",style:p}):r(t)?o(t,{style:p}):e(t,{style:p}):null;return e("div",Object.assign({style:f,role:"listbox",className:"yoopta-action-menu-list-content"},{children:e("div",Object.assign({className:"yoo-action-menu-max-h-[300px] yoo-action-menu-overflow-y-auto yoo-action-menu-overflow-x-hidden"},{children:t("div",Object.assign({},c(),{className:"yoo-action-menu-overflow-hidden yoo-action-menu-p-0 yoo-action-menu-text-foreground"},{children:[a&&e("div",Object.assign({className:"yoo-action-menu-text-left yoo-action-menu-text-muted-foreground yoo-action-menu-text-xs yoo-action-menu-px-1 yoo-action-menu-py-1"},{children:"No actions available"})),n.map(((n,r)=>{var o,a,c,l;const f=i.blocks[n.type];if(!f)return null;const p=(null===(a=null===(o=f.options)||void 0===o?void 0:o.display)||void 0===a?void 0:a.title)||f.type,g=(null===(l=null===(c=f.options)||void 0===c?void 0:c.display)||void 0===l?void 0:l.description)||"",m=n.icon||te[n.type];return t("button",Object.assign({type:"button"},s(n.type),{className:"yoopta-button yoo-action-menu-flex yoo-action-menu-w-full yoo-action-menu-cursor-pointer yoo-action-menu-items-center yoo-action-menu-space-x-2 yoo-action-menu-rounded-md yoo-action-menu-px-1 yoo-action-menu-py-1 yoo-action-menu-mb-0.5 last:yoo-action-menu-mb-0 yoo-action-menu-text-left yoo-action-menu-text-sm hover:yoo-action-menu-bg-[#f4f4f5] aria-selected:yoo-action-menu-bg-[#f0f0f0]"},{children:[e("div",Object.assign({style:d,className:"yoo-action-menu-flex yoo-action-menu-h-[40px] yoo-action-menu-w-[40px] yoo-action-menu-items-center yoo-action-menu-justify-center yoo-action-menu-rounded-md yoo-action-menu-border yoo-action-menu-border-solid yoo-action-menu-border-[#e5e7eb] yoo-action-menu-bg-[#FFFFFF]"},{children:h(m)})),t("div",{children:[e("div",Object.assign({className:"yoo-action-menu-font-medium"},{children:p})),!u&&e("div",Object.assign({className:"yoo-action-menu-text-xs yoo-action-menu-text-muted-foreground yoo-action-menu-truncate yoo-action-menu-text-ellipsis yoo-action-menu-max-w-[200px]"},{children:g}))]})]}),n.type)}))]}))}))}))};function re(){return"undefined"!=typeof window}function oe(e){return se(e)?(e.nodeName||"").toLowerCase():"#document"}function ie(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ae(e){var t;return null==(t=(se(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function se(e){return!!re()&&(e instanceof Node||e instanceof ie(e).Node)}function ce(e){return!!re()&&(e instanceof Element||e instanceof ie(e).Element)}function le(e){return!!re()&&(e instanceof HTMLElement||e instanceof ie(e).HTMLElement)}function ue(e){return!(!re()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ie(e).ShadowRoot)}function fe(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ve(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function de(e){return["table","td","th"].includes(oe(e))}function pe(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function he(e){const t=ge(),n=ce(e)?ve(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function ge(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function me(e){return["html","body","#document"].includes(oe(e))}function ve(e){return ie(e).getComputedStyle(e)}function ye(e){return ce(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function we(e){if("html"===oe(e))return e;const t=e.assignedSlot||e.parentNode||ue(e)&&e.host||ae(e);return ue(t)?t.host:t}function be(e){const t=we(e);return me(t)?e.ownerDocument?e.ownerDocument.body:e.body:le(t)&&fe(t)?t:be(t)}function xe(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=be(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=ie(o);if(i){const e=_e(a);return t.concat(a,a.visualViewport||[],fe(o)?o:[],e&&n?xe(e):[])}return t.concat(o,xe(o,[],n))}function _e(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Oe=Math.min,ke=Math.max,Pe=Math.round,je=Math.floor,Ee=e=>({x:e,y:e}),Se={left:"right",right:"left",bottom:"top",top:"bottom"},Re={start:"end",end:"start"};function Ce(e,t,n){return ke(e,Oe(t,n))}function Ae(e,t){return"function"==typeof e?e(t):e}function Le(e){return e.split("-")[0]}function Me(e){return e.split("-")[1]}function Te(e){return"x"===e?"y":"x"}function Ne(e){return"y"===e?"height":"width"}function De(e){return["top","bottom"].includes(Le(e))?"y":"x"}function Fe(e){return Te(De(e))}function Be(e){return e.replace(/start|end/g,(e=>Re[e]))}function qe(e){return e.replace(/left|right|bottom|top/g,(e=>Se[e]))}function ze(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Ve(e,t,n){let{reference:r,floating:o}=e;const i=De(t),a=Fe(t),s=Ne(a),c=Le(t),l="y"===i,u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,d=r[s]/2-o[s]/2;let p;switch(c){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-o.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Me(t)){case"start":p[a]-=d*(n&&l?-1:1);break;case"end":p[a]+=d*(n&&l?-1:1)}return p}async function We(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=Ae(t,e),h=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(p),g=s[d?"floating"===f?"reference":"floating":f],m=ze(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),v="floating"===f?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),w=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},b=ze(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:y,strategy:c}):v);return{top:(m.top-b.top+h.top)/w.y,bottom:(b.bottom-m.bottom+h.bottom)/w.y,left:(m.left-b.left+h.left)/w.x,right:(b.right-m.right+h.right)/w.x}}function Ie(e){const t=ve(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=le(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=Pe(n)!==i||Pe(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function He(e){return ce(e)?e:e.contextElement}function Ze(e){const t=He(e);if(!le(t))return Ee(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=Ie(t);let a=(i?Pe(n.width):n.width)/r,s=(i?Pe(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Ke=Ee(0);function $e(e){const t=ie(e);return ge()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ke}function Je(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=He(e);let a=Ee(1);t&&(r?ce(r)&&(a=Ze(r)):a=Ze(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==ie(e))&&t}(i,n,r)?$e(i):Ee(0);let c=(o.left+s.x)/a.x,l=(o.top+s.y)/a.y,u=o.width/a.x,f=o.height/a.y;if(i){const e=ie(i),t=r&&ce(r)?ie(r):r;let n=e,o=_e(n);for(;o&&r&&t!==n;){const e=Ze(o),t=o.getBoundingClientRect(),r=ve(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,u*=e.x,f*=e.y,c+=i,l+=a,n=ie(o),o=_e(n)}}return ze({width:u,height:f,x:c,y:l})}function Ue(e,t){const n=ye(e).scrollLeft;return t?t.left+n:Je(ae(e)).left+n}function Xe(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=ie(e),r=ae(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,c=0;if(o){i=o.width,a=o.height;const e=ge();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,c=o.offsetTop)}return{width:i,height:a,x:s,y:c}}(e,n);else if("document"===t)r=function(e){const t=ae(e),n=ye(e),r=e.ownerDocument.body,o=ke(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ke(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Ue(e);const s=-n.scrollTop;return"rtl"===ve(r).direction&&(a+=ke(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}(ae(e));else if(ce(t))r=function(e,t){const n=Je(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=le(e)?Ze(e):Ee(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=$e(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return ze(r)}function Ye(e,t){const n=we(e);return!(n===t||!ce(n)||me(n))&&("fixed"===ve(n).position||Ye(n,t))}function Ge(e,t,n){const r=le(t),o=ae(t),i="fixed"===n,a=Je(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const c=Ee(0);if(r||!r&&!i)if(("body"!==oe(t)||fe(o))&&(s=ye(t)),r){const e=Je(t,!0,i,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else o&&(c.x=Ue(o));let l=0,u=0;if(o&&!r&&!i){const e=o.getBoundingClientRect();u=e.top+s.scrollTop,l=e.left+s.scrollLeft-Ue(o,e)}return{x:a.left+s.scrollLeft-c.x-l,y:a.top+s.scrollTop-c.y-u,width:a.width,height:a.height}}function Qe(e){return"static"===ve(e).position}function et(e,t){if(!le(e)||"fixed"===ve(e).position)return null;if(t)return t(e);let n=e.offsetParent;return ae(e)===n&&(n=n.ownerDocument.body),n}function tt(e,t){const n=ie(e);if(pe(e))return n;if(!le(e)){let t=we(e);for(;t&&!me(t);){if(ce(t)&&!Qe(t))return t;t=we(t)}return n}let r=et(e,t);for(;r&&de(r)&&Qe(r);)r=et(r,t);return r&&me(r)&&Qe(r)&&!he(r)?n:r||function(e){let t=we(e);for(;le(t)&&!me(t);){if(he(t))return t;if(pe(t))return null;t=we(t)}return null}(e)||n}const nt={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,a=ae(r),s=!!t&&pe(t.floating);if(r===a||s&&i)return n;let c={scrollLeft:0,scrollTop:0},l=Ee(1);const u=Ee(0),f=le(r);if((f||!f&&!i)&&(("body"!==oe(r)||fe(a))&&(c=ye(r)),le(r))){const e=Je(r);l=Ze(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}},getDocumentElement:ae,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[..."clippingAncestors"===n?pe(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=xe(e,[],!1).filter((e=>ce(e)&&"body"!==oe(e))),o=null;const i="fixed"===ve(e).position;let a=i?we(e):e;for(;ce(a)&&!me(a);){const t=ve(a),n=he(a);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||fe(a)&&!n&&Ye(e,a))?r=r.filter((e=>e!==a)):o=t,a=we(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=i[0],s=i.reduce(((e,n)=>{const r=Xe(t,n,o);return e.top=ke(r.top,e.top),e.right=Oe(r.right,e.right),e.bottom=Oe(r.bottom,e.bottom),e.left=ke(r.left,e.left),e}),Xe(t,a,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:tt,getElementRects:async function(e){const t=this.getOffsetParent||tt,n=this.getDimensions,r=await n(e.floating);return{reference:Ge(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Ie(e);return{width:t,height:n}},getScale:Ze,isElement:ce,isRTL:function(e){return"rtl"===ve(e).direction}};function rt(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,l=He(e),u=o||i?[...l?xe(l):[],...xe(t)]:[];u.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const f=l&&s?function(e,t){let n,r=null;const o=ae(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,c){void 0===s&&(s=!1),void 0===c&&(c=1),i();const{left:l,top:u,width:f,height:d}=e.getBoundingClientRect();if(s||t(),!f||!d)return;const p={rootMargin:-je(u)+"px "+-je(o.clientWidth-(l+f))+"px "+-je(o.clientHeight-(u+d))+"px "+-je(l)+"px",threshold:ke(0,Oe(1,c))||1};let h=!0;function g(e){const t=e[0].intersectionRatio;if(t!==c){if(!h)return a();t?a(!1,t):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}h=!1}try{r=new IntersectionObserver(g,{...p,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),i}(l,n):null;let d,p=-1,h=null;a&&(h=new ResizeObserver((e=>{let[r]=e;r&&r.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=h)||e.observe(t)}))),n()})),l&&!c&&h.observe(l),h.observe(t));let g=c?Je(e):null;return c&&function t(){const r=Je(e);!g||r.x===g.x&&r.y===g.y&&r.width===g.width&&r.height===g.height||n();g=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==f||f(),null==(e=h)||e.disconnect(),h=null,c&&cancelAnimationFrame(d)}}const ot=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,c=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=Le(n),s=Me(n),c="y"===De(n),l=["left","top"].includes(a)?-1:1,u=i&&c?-1:1,f=Ae(t,e);let{mainAxis:d,crossAxis:p,alignmentAxis:h}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return s&&"number"==typeof h&&(p="end"===s?-1*h:h),c?{x:p*u,y:d*l}:{x:d*l,y:p*u}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+c.x,y:i+c.y,data:{...c,placement:a}}}}},it=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=Ae(e,t),l={x:n,y:r},u=await We(t,c),f=De(Le(o)),d=Te(f);let p=l[d],h=l[f];if(i){const e="y"===d?"bottom":"right";p=Ce(p+u["y"===d?"top":"left"],p,p-u[e])}if(a){const e="y"===f?"bottom":"right";h=Ce(h+u["y"===f?"top":"left"],h,h-u[e])}const g=s.fn({...t,[d]:p,[f]:h});return{...g,data:{x:g.x-n,y:g.y-r}}}}},at=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...m}=Ae(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const v=Le(o),y=De(s),w=Le(s)===s,b=await(null==c.isRTL?void 0:c.isRTL(l.floating)),x=d||(w||!g?[qe(s)]:function(e){const t=qe(e);return[Be(e),t,Be(t)]}(s)),_="none"!==h;!d&&_&&x.push(...function(e,t,n,r){const o=Me(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}(Le(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(Be)))),i}(s,g,h,b));const O=[s,...x],k=await We(t,m),P=[];let j=(null==(r=i.flip)?void 0:r.overflows)||[];if(u&&P.push(k[v]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=Me(e),o=Fe(e),i=Ne(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=qe(a)),[a,qe(a)]}(o,a,b);P.push(k[e[0]],k[e[1]])}if(j=[...j,{placement:o,overflows:P}],!P.every((e=>e<=0))){var E,S;const e=((null==(E=i.flip)?void 0:E.index)||0)+1,t=O[e];if(t)return{data:{index:e,overflows:j},reset:{placement:t}};let n=null==(S=j.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:S.placement;if(!n)switch(p){case"bestFit":{var R;const e=null==(R=j.filter((e=>{if(_){const t=De(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:R[0];e&&(n=e);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}},st=(e,t,n)=>{const r=new Map,o={platform:nt,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),c=await(null==a.isRTL?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=Ve(l,r,c),d=r,p={},h=0;for(let n=0;n<s.length;n++){const{name:i,fn:g}=s[n],{x:m,y:v,data:y,reset:w}=await g({x:u,y:f,initialPlacement:r,placement:d,strategy:o,middlewareData:p,rects:l,platform:a,elements:{reference:e,floating:t}});u=null!=m?m:u,f=null!=v?v:f,p={...p,[i]:{...p[i],...y}},w&&h<=50&&(h++,"object"==typeof w&&(w.placement&&(d=w.placement),w.rects&&(l=!0===w.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):w.rects),({x:u,y:f}=Ve(l,d,c))),n=-1)}return{x:u,y:f,placement:d,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var ct="undefined"!=typeof document?i:a;function lt(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!lt(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!lt(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function ut(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ft(e,t){const n=ut(e);return Math.round(t*n)/n}function dt(e){const t=n.useRef(e);return ct((()=>{t.current=e})),t}const pt=n["useInsertionEffect".toString()]||(e=>e());var ht="undefined"!=typeof document?i:a;let gt=!1,mt=0;const vt=()=>"floating-ui-"+mt++;const yt=n["useId".toString()]||function(){const[e,t]=n.useState((()=>gt?vt():void 0));return ht((()=>{null==e&&t(vt())}),[]),n.useEffect((()=>{gt||(gt=!0)}),[]),e};const wt=n.createContext(null),bt=n.createContext(null);function xt(e){const t=s(e);return ht((()=>{t.current=e})),t}function _t(e){var t;void 0===e&&(e={});const{open:r=!1,onOpenChange:o,nodeId:i}=e,[a,s]=n.useState(null),c=(null==(t=e.elements)?void 0:t.reference)||a,u=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:o=[],platform:i,elements:{reference:a,floating:s}={},transform:c=!0,whileElementsMounted:u,open:f}=e,[d,p]=n.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,g]=n.useState(o);lt(h,o)||g(o);const[m,v]=n.useState(null),[y,w]=n.useState(null),b=n.useCallback((e=>{e!==k.current&&(k.current=e,v(e))}),[]),x=n.useCallback((e=>{e!==P.current&&(P.current=e,w(e))}),[]),_=a||m,O=s||y,k=n.useRef(null),P=n.useRef(null),j=n.useRef(d),E=null!=u,S=dt(u),R=dt(i),C=n.useCallback((()=>{if(!k.current||!P.current)return;const e={placement:t,strategy:r,middleware:h};R.current&&(e.platform=R.current),st(k.current,P.current,e).then((e=>{const t={...e,isPositioned:!0};A.current&&!lt(j.current,t)&&(j.current=t,l.flushSync((()=>{p(t)})))}))}),[h,t,r,R]);ct((()=>{!1===f&&j.current.isPositioned&&(j.current.isPositioned=!1,p((e=>({...e,isPositioned:!1}))))}),[f]);const A=n.useRef(!1);ct((()=>(A.current=!0,()=>{A.current=!1})),[]),ct((()=>{if(_&&(k.current=_),O&&(P.current=O),_&&O){if(S.current)return S.current(_,O,C);C()}}),[_,O,C,S,E]);const L=n.useMemo((()=>({reference:k,floating:P,setReference:b,setFloating:x})),[b,x]),M=n.useMemo((()=>({reference:_,floating:O})),[_,O]),T=n.useMemo((()=>{const e={position:r,left:0,top:0};if(!M.floating)return e;const t=ft(M.floating,d.x),n=ft(M.floating,d.y);return c?{...e,transform:"translate("+t+"px, "+n+"px)",...ut(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,c,M.floating,d.x,d.y]);return n.useMemo((()=>({...d,update:C,refs:L,elements:M,floatingStyles:T})),[d,C,L,M,T])}(e),f=n.useContext(bt),d=null!=((null==(p=n.useContext(wt))?void 0:p.id)||null);var p;const h=function(e){const t=n.useRef((()=>{}));return pt((()=>{t.current=e})),n.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}(((e,t,n)=>{e&&(m.current.openEvent=t),v.emit("openchange",{open:e,event:t,reason:n,nested:d}),null==o||o(e,t,n)})),g=n.useRef(null),m=n.useRef({}),v=n.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}()))[0],y=yt(),w=n.useCallback((e=>{const t=ce(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u.refs.setReference(t)}),[u.refs]),b=n.useCallback((e=>{(ce(e)||null===e)&&(g.current=e,s(e)),(ce(u.refs.reference.current)||null===u.refs.reference.current||null!==e&&!ce(e))&&u.refs.setReference(e)}),[u.refs]),x=n.useMemo((()=>({...u.refs,setReference:b,setPositionReference:w,domReference:g})),[u.refs,b,w]),_=n.useMemo((()=>({...u.elements,domReference:c})),[u.elements,c]),O=n.useMemo((()=>({...u,refs:x,elements:_,dataRef:m,nodeId:i,floatingId:y,events:v,open:r,onOpenChange:h})),[u,i,y,v,r,h,x,_]);return ht((()=>{const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===i));e&&(e.context=O)})),n.useMemo((()=>({...u,context:O,refs:x,elements:_})),[u,x,_,O])}const Ot=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function kt(e,t){return"function"==typeof e?e(t):e}function Pt(e,t){void 0===t&&(t={});const{open:r,elements:{floating:o}}=e,{duration:i=250}=t,a=("number"==typeof i?i:i.close)||0,[s,c]=n.useState(!1),[l,u]=n.useState("unmounted"),f=function(e,t){const[r,o]=n.useState(e);return e&&!r&&o(!0),n.useEffect((()=>{if(!e){const e=setTimeout((()=>o(!1)),t);return()=>clearTimeout(e)}}),[e,t]),r}(r,a);return ht((()=>{s&&!f&&u("unmounted")}),[s,f]),ht((()=>{if(o){if(r){u("initial");const e=requestAnimationFrame((()=>{u("open")}));return()=>{cancelAnimationFrame(e)}}c(!0),u("close")}}),[r,o]),{isMounted:f,status:l}}
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function jt(e){return"[object Object]"===Object.prototype.toString.call(e)}function Et(e){var t,n;return!1!==jt(e)&&(void 0===(t=e.constructor)||!1!==jt(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}var St=Symbol.for("immer-nothing"),Rt=Symbol.for("immer-draftable"),Ct=Symbol.for("immer-state");function At(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Lt=Object.getPrototypeOf;function Mt(e){return!!e&&!!e[Ct]}function Tt(e){return!!e&&(Dt(e)||Array.isArray(e)||!!e[Rt]||!!e.constructor?.[Rt]||Vt(e)||Wt(e))}var Nt=Object.prototype.constructor.toString();function Dt(e){if(!e||"object"!=typeof e)return!1;const t=Lt(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Nt}function Ft(e,t){0===Bt(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function Bt(e){const t=e[Ct];return t?t.type_:Array.isArray(e)?1:Vt(e)?2:Wt(e)?3:0}function qt(e,t){return 2===Bt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zt(e,t,n){const r=Bt(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Vt(e){return e instanceof Map}function Wt(e){return e instanceof Set}function It(e){return e.copy_||e.base_}function Ht(e,t){if(Vt(e))return new Map(e);if(Wt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Dt(e)){if(!Lt(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[Ct];let r=Reflect.ownKeys(n);for(let t=0;t<r.length;t++){const o=r[t],i=n[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Lt(e),n)}function Zt(e,t=!1){return $t(e)||Mt(e)||!Tt(e)||(Bt(e)>1&&(e.set=e.add=e.clear=e.delete=Kt),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>Zt(t,!0)))),e}function Kt(){At(2)}function $t(e){return Object.isFrozen(e)}var Jt,Ut={};function Xt(e){const t=Ut[e];return t||At(0),t}function Yt(){return Jt}function Gt(e,t){t&&(Xt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Qt(e){en(e),e.drafts_.forEach(nn),e.drafts_=null}function en(e){e===Jt&&(Jt=e.parent_)}function tn(e){return Jt={drafts_:[],parent_:Jt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nn(e){const t=e[Ct];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function rn(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Ct].modified_&&(Qt(t),At(4)),Tt(e)&&(e=on(t,e),t.parent_||sn(t,e)),t.patches_&&Xt("Patches").generateReplacementPatches_(n[Ct].base_,e,t.patches_,t.inversePatches_)):e=on(t,n,[]),Qt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==St?e:void 0}function on(e,t,n){if($t(t))return t;const r=t[Ct];if(!r)return Ft(t,((o,i)=>an(e,r,t,o,i,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return sn(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let o=t,i=!1;3===r.type_&&(o=new Set(t),t.clear(),i=!0),Ft(o,((o,a)=>an(e,r,t,o,a,n,i))),sn(e,t,!1),n&&e.patches_&&Xt("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function an(e,t,n,r,o,i,a){if(Mt(o)){const a=on(e,o,i&&t&&3!==t.type_&&!qt(t.assigned_,r)?i.concat(r):void 0);if(zt(n,r,a),!Mt(a))return;e.canAutoFreeze_=!1}else a&&n.add(o);if(Tt(o)&&!$t(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;on(e,o),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||sn(e,o)}}function sn(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zt(t,n)}var cn={get(e,t){if(t===Ct)return e;const n=It(e);if(!qt(n,t))return function(e,t,n){const r=fn(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Tt(r)?r:r===un(e.base_,t)?(pn(e),e.copy_[t]=hn(r,e)):r},has:(e,t)=>t in It(e),ownKeys:e=>Reflect.ownKeys(It(e)),set(e,t,n){const r=fn(It(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=un(It(e),t),a=r?.[Ct];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((o=n)===(i=r)?0!==o||1/o==1/i:o!=o&&i!=i)&&(void 0!==n||qt(e.base_,t)))return!0;pn(e),dn(e)}var o,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==un(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,pn(e),dn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=It(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){At(11)},getPrototypeOf:e=>Lt(e.base_),setPrototypeOf(){At(12)}},ln={};function un(e,t){const n=e[Ct];return(n?It(n):e)[t]}function fn(e,t){if(!(t in e))return;let n=Lt(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Lt(n)}}function dn(e){e.modified_||(e.modified_=!0,e.parent_&&dn(e.parent_))}function pn(e){e.copy_||(e.copy_=Ht(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Ft(cn,((e,t)=>{ln[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ln.deleteProperty=function(e,t){return ln.set.call(this,e,t,void 0)},ln.set=function(e,t,n){return cn.set.call(this,e[0],t,n,e[0])};function hn(e,t){const n=Vt(e)?Xt("MapSet").proxyMap_(e,t):Wt(e)?Xt("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Yt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=cn;n&&(o=[r],i=ln);const{revoke:a,proxy:s}=Proxy.revocable(o,i);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:Yt()).drafts_.push(n),n}function gn(e){if(!Tt(e)||$t(e))return e;const t=e[Ct];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ht(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ht(e,!0);return Ft(n,((e,t)=>{zt(n,e,gn(t))})),t&&(t.finalized_=!1),n}var mn=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...o){return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!=typeof t&&At(6),void 0!==n&&"function"!=typeof n&&At(7),Tt(e)){const o=tn(this),i=hn(e,void 0);let a=!0;try{r=t(i),a=!1}finally{a?Qt(o):en(o)}return Gt(o,n),rn(r,o)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===St&&(r=void 0),this.autoFreeze_&&Zt(r,!0),n){const t=[],o=[];Xt("Patches").generateReplacementPatches_(e,r,t,o),n(t,o)}return r}At(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;return[this.produce(e,t,((e,t)=>{n=e,r=t})),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Tt(e)||At(8),Mt(e)&&(e=function(e){Mt(e)||At(10);return gn(e)}(e));const t=tn(this),n=hn(e,void 0);return n[Ct].isManual_=!0,en(t),n}finishDraft(e,t){const n=e&&e[Ct];n&&n.isManual_||At(9);const{scope_:r}=n;return Gt(r,t),rn(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Xt("Patches").applyPatches_;return Mt(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},vn=mn.produce;mn.produceWithPatches.bind(mn),mn.setAutoFreeze.bind(mn),mn.setUseStrictShallowCopy.bind(mn),mn.applyPatches.bind(mn);var yn=mn.createDraft.bind(mn),wn=mn.finishDraft.bind(mn),bn={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=bn.levels(e,t);return r=n?r.slice(1):r.slice(0,-1)},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var o=e[r];if(o!==t[r])break;n.push(o)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),i=e[n],a=t[n];return bn.equals(r,o)&&i>a},endsAt(e,t){var n=e.length,r=e.slice(0,n),o=t.slice(0,n);return bn.equals(r,o)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),i=e[n],a=t[n];return bn.equals(r,o)&&i<a},equals:(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n])),hasPrevious:e=>e[e.length-1]>0,isAfter:(e,t)=>1===bn.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===bn.compare(e,t),isBefore:(e,t)=>-1===bn.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===bn.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===bn.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===bn.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===bn.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&bn.equals(n,r)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=[],o=0;o<=e.length;o++)r.push(e.slice(0,o));return n&&r.reverse(),r},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!bn.isAncestor(t,e)&&!bn.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:o="forward"}=n;if(0===e.length)return r;switch(t.type){case"insert_node":var{path:i}=t;(bn.equals(i,r)||bn.endsBefore(i,r)||bn.isAncestor(i,r))&&(r[i.length-1]+=1);break;case"remove_node":var{path:a}=t;if(bn.equals(a,r)||bn.isAncestor(a,r))return null;bn.endsBefore(a,r)&&(r[a.length-1]-=1);break;case"merge_node":var{path:s,position:c}=t;bn.equals(s,r)||bn.endsBefore(s,r)?r[s.length-1]-=1:bn.isAncestor(s,r)&&(r[s.length-1]-=1,r[s.length]+=c);break;case"split_node":var{path:l,position:u}=t;if(bn.equals(l,r)){if("forward"===o)r[r.length-1]+=1;else if("backward"!==o)return null}else bn.endsBefore(l,r)?r[l.length-1]+=1:bn.isAncestor(l,r)&&e[l.length]>=u&&(r[l.length-1]+=1,r[l.length]-=u);break;case"move_node":var{path:f,newPath:d}=t;if(bn.equals(f,d))return r;if(bn.isAncestor(f,r)||bn.equals(f,r)){var p=d.slice();return bn.endsBefore(f,d)&&f.length<d.length&&(p[f.length-1]-=1),p.concat(r.slice(f.length))}bn.isSibling(f,d)&&(bn.isAncestor(d,r)||bn.equals(d,r))?bn.endsBefore(f,r)?r[f.length-1]-=1:r[f.length-1]+=1:bn.endsBefore(d,r)||bn.equals(d,r)||bn.isAncestor(d,r)?(bn.endsBefore(f,r)&&(r[f.length-1]-=1),r[d.length-1]+=1):bn.endsBefore(f,r)&&(bn.equals(d,r)&&(r[d.length-1]+=1),r[f.length-1]-=1)}return r}};function xn(e){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(e)}function _n(e){var t=function(e,t){if("object"!==xn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xn(t)?t:String(t)}function On(e,t,n){return(t=_n(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jn={transform(e,t){e.children=yn(e.children);var n=e.selection&&yn(e.selection);try{n=((e,t,n)=>{switch(n.type){case"insert_node":var{path:r,node:o}=n,i=qn.parent(e,r),a=r[r.length-1];if(a>i.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(i.children.splice(a,0,o),t)for(var[s,c]of Mn.points(t))t[c]=$n.transform(s,n);break;case"insert_text":var{path:l,offset:u,text:f}=n;if(0===f.length)break;var d=qn.leaf(e,l),p=d.text.slice(0,u),h=d.text.slice(u);if(d.text=p+f+h,t)for(var[g,m]of Mn.points(t))t[m]=$n.transform(g,n);break;case"merge_node":var{path:v}=n,y=qn.get(e,v),w=bn.previous(v),b=qn.get(e,w),x=qn.parent(e,v),_=v[v.length-1];if(tr.isText(y)&&tr.isText(b))b.text+=y.text;else{if(tr.isText(y)||tr.isText(b))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(v,"] to nodes of different interfaces: ").concat(Un.stringify(y)," ").concat(Un.stringify(b)));b.children.push(...y.children)}if(x.children.splice(_,1),t)for(var[O,k]of Mn.points(t))t[k]=$n.transform(O,n);break;case"move_node":var{path:P,newPath:j}=n;if(bn.isAncestor(P,j))throw new Error("Cannot move a path [".concat(P,"] to new path [").concat(j,"] because the destination is inside itself."));var E=qn.get(e,P),S=qn.parent(e,P),R=P[P.length-1];S.children.splice(R,1);var C=bn.transform(P,n),A=qn.get(e,bn.parent(C)),L=C[C.length-1];if(A.children.splice(L,0,E),t)for(var[M,T]of Mn.points(t))t[T]=$n.transform(M,n);break;case"remove_node":var{path:N}=n,D=N[N.length-1];if(qn.parent(e,N).children.splice(D,1),t)for(var[F,B]of Mn.points(t)){var q=$n.transform(F,n);if(null!=t&&null!=q)t[B]=q;else{var z=void 0,V=void 0;for(var[W,I]of qn.texts(e)){if(-1!==bn.compare(I,N)){V=[W,I];break}z=[W,I]}var H=!1;z&&V&&(H=bn.equals(V[1],N)?!bn.hasPrevious(V[1]):bn.common(z[1],N).length<bn.common(V[1],N).length),z&&!H?(F.path=z[1],F.offset=z[0].text.length):V?(F.path=V[1],F.offset=0):t=null}}break;case"remove_text":var{path:Z,offset:K,text:$}=n;if(0===$.length)break;var J=qn.leaf(e,Z),U=J.text.slice(0,K),X=J.text.slice(K+$.length);if(J.text=U+X,t)for(var[Y,G]of Mn.points(t))t[G]=$n.transform(Y,n);break;case"set_node":var{path:Q,properties:ee,newProperties:te}=n;if(0===Q.length)throw new Error("Cannot set properties on the root node!");var ne=qn.get(e,Q);for(var re in te){if("children"===re||"text"===re)throw new Error('Cannot set the "'.concat(re,'" property of nodes!'));var oe=te[re];null==oe?delete ne[re]:ne[re]=oe}for(var ie in ee)te.hasOwnProperty(ie)||delete ne[ie];break;case"set_selection":var{newProperties:ae}=n;if(null==ae)t=ae;else{if(null==t){if(!Mn.isRange(ae))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Un.stringify(ae)," when there is no current selection."));t=Pn({},ae)}for(var se in ae){var ce=ae[se];if(null==ce){if("anchor"===se||"focus"===se)throw new Error('Cannot remove the "'.concat(se,'" selection property'));delete t[se]}else t[se]=ce}}break;case"split_node":var{path:le,position:ue,properties:fe}=n;if(0===le.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(le,"] because the root node cannot be split."));var de,pe=qn.get(e,le),he=qn.parent(e,le),ge=le[le.length-1];if(tr.isText(pe)){var me=pe.text.slice(0,ue),ve=pe.text.slice(ue);pe.text=me,de=Pn(Pn({},fe),{},{text:ve})}else{var ye=pe.children.slice(0,ue),we=pe.children.slice(ue);pe.children=ye,de=Pn(Pn({},fe),{},{children:we})}if(he.children.splice(ge+1,0,de),t)for(var[be,xe]of Mn.points(t))t[xe]=$n.transform(be,n)}return t})(e,n,t)}finally{e.children=wn(e.children),e.selection=n?Mt(n)?wn(n):n:null}}},En={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},Sn={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},Rn=(e,t)=>{for(var n in e){var r=e[n],o=t[n];if(Et(r)&&Et(o)){if(!Rn(r,o))return!1}else if(Array.isArray(r)&&Array.isArray(o)){if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(r[i]!==o[i])return!1}else if(r!==o)return!1}for(var a in t)if(void 0===e[a]&&void 0!==t[a])return!1;return!0};function Cn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var An=["anchor","focus"];function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mn={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:o}=e;return Mn.isBackward(e)===n?[r,o]:[o,r]},end(e){var[,t]=Mn.edges(e);return t},equals:(e,t)=>$n.equals(e.anchor,t.anchor)&&$n.equals(e.focus,t.focus),includes(e,t){if(Mn.isRange(t)){if(Mn.includes(e,t.anchor)||Mn.includes(e,t.focus))return!0;var[n,r]=Mn.edges(e),[o,i]=Mn.edges(t);return $n.isBefore(n,o)&&$n.isAfter(r,i)}var[a,s]=Mn.edges(e),c=!1,l=!1;return $n.isPoint(t)?(c=$n.compare(t,a)>=0,l=$n.compare(t,s)<=0):(c=bn.compare(t,a.path)>=0,l=bn.compare(t,s.path)<=0),c&&l},intersection(e,t){var n=Cn(e,An),[r,o]=Mn.edges(e),[i,a]=Mn.edges(t),s=$n.isBefore(r,i)?i:r,c=$n.isBefore(o,a)?o:a;return $n.isBefore(c,s)?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({anchor:s,focus:c},n)},isBackward(e){var{anchor:t,focus:n}=e;return $n.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return $n.equals(t,n)},isExpanded:e=>!Mn.isCollapsed(e),isForward:e=>!Mn.isBackward(e),isRange:e=>Et(e)&&$n.isPoint(e.anchor)&&$n.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=Mn.edges(e);return t},transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return vn(e,(e=>{if(null===e)return null;var r,o,{affinity:i="inward"}=n;if("inward"===i){var a=Mn.isCollapsed(e);Mn.isForward(e)?(r="forward",o=a?r:"backward"):(r="backward",o=a?r:"forward")}else"outward"===i?Mn.isForward(e)?(r="backward",o="forward"):(r="forward",o="backward"):(r=i,o=i);var s=$n.transform(e.anchor,t,{affinity:r}),c=$n.transform(e.focus,t,{affinity:o});if(!s||!c)return null;e.anchor=s,e.focus=c}))}},Tn=e=>Et(e)&&qn.isNodeList(e.children)&&!Hn.isEditor(e),Nn={isAncestor:e=>Et(e)&&qn.isNodeList(e.children),isElement:Tn,isElementList:e=>Array.isArray(e)&&e.every((e=>Nn.isElement(e))),isElementProps:e=>void 0!==e.children,isElementType:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return Tn(e)&&e[n]===t},matches(e,t){for(var n in t)if("children"!==n&&e[n]!==t[n])return!1;return!0}},Dn=["children"],Fn=["text"],Bn=new WeakMap,qn={ancestor(e,t){var n=qn.get(e,t);if(tr.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(Un.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var r of bn.ancestors(t,n)){var o=[qn.ancestor(e,r),r];yield o}}()},child(e,t){if(tr.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Un.stringify(e)));var n=e.children[t];if(null==n)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(Un.stringify(e)));return n},children(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,o=qn.ancestor(e,t),{children:i}=o,a=r?i.length-1:0;r?a>=0:a<i.length;){var s=qn.child(o,a),c=t.concat(a);yield[s,c],a=r?a-1:a+1}}()},common(e,t,n){var r=bn.common(t,n);return[qn.get(e,r),r]},descendant(e,t){var n=qn.get(e,t);if(Hn.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(Un.stringify(n)));return n},descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of qn.nodes(e,t))0!==r.length&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of qn.nodes(e,t))Nn.isElement(n)&&(yield[n,r])}()},extractProps:e=>Nn.isAncestor(e)?Cn(e,Dn):Cn(e,Fn),first(e,t){for(var n=t.slice(),r=qn.get(e,n);r&&!tr.isText(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(tr.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Un.stringify(e)));var n=vn({children:e.children},(e=>{var[n,r]=Mn.edges(t),o=qn.nodes(e,{reverse:!0,pass:e=>{var[,n]=e;return!Mn.includes(t,n)}});for(var[,i]of o){if(!Mn.includes(t,i)){var a=qn.parent(e,i),s=i[i.length-1];a.children.splice(s,1)}if(bn.equals(i,r.path)){var c=qn.leaf(e,i);c.text=c.text.slice(0,r.offset)}if(bn.equals(i,n.path)){var l=qn.leaf(e,i);l.text=l.text.slice(n.offset)}}Hn.isEditor(e)&&(e.selection=null)}));return n.children},get(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(tr.isText(n)||!n.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(Un.stringify(e)));n=n.children[o]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(tr.isText(n)||!n.children[o])return!1;n=n.children[o]}return!0},isNode:e=>tr.isText(e)||Nn.isElement(e)||Hn.isEditor(e),isNodeList(e){if(!Array.isArray(e))return!1;var t=Bn.get(e);if(void 0!==t)return t;var n=e.every((e=>qn.isNode(e)));return Bn.set(e,n),n},last(e,t){for(var n=t.slice(),r=qn.get(e,n);r&&!tr.isText(r)&&0!==r.children.length;){var o=r.children.length-1;r=r.children[o],n.push(o)}return[r,n]},leaf(e,t){var n=qn.get(e,t);if(!tr.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Un.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var r of bn.levels(t,n)){var o=qn.get(e,r);yield[o,r]}}()},matches:(e,t)=>Nn.isElement(e)&&Nn.isElementProps(t)&&Nn.matches(e,t)||tr.isText(e)&&tr.isTextProps(t)&&tr.matches(e,t),nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:o=[],to:i}=t,a=new Set,s=[],c=e;!i||!(r?bn.isBefore(s,i):bn.isAfter(s,i));)if(a.has(c)||(yield[c,s]),a.has(c)||tr.isText(c)||0===c.children.length||null!=n&&!1!==n([c,s])){if(0===s.length)break;if(!r){var l=bn.next(s);if(qn.has(e,l)){s=l,c=qn.get(e,s);continue}}if(r&&0!==s[s.length-1])s=bn.previous(s),c=qn.get(e,s);else s=bn.parent(s),c=qn.get(e,s),a.add(c)}else{a.add(c);var u=r?c.children.length-1:0;bn.isAncestor(s,o)&&(u=o[s.length]),s=s.concat(u),c=qn.get(e,s)}}()},parent(e,t){var n=bn.parent(t),r=qn.get(e,n);if(tr.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string:e=>tr.isText(e)?e.text:e.children.map(qn.string).join(""),texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of qn.nodes(e,t))tr.isText(n)&&(yield[n,r])}()}};function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wn={isNodeOperation:e=>Wn.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!Et(e))return!1;switch(e.type){case"insert_node":case"remove_node":return bn.isPath(e.path)&&qn.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&bn.isPath(e.path);case"merge_node":return"number"==typeof e.position&&bn.isPath(e.path)&&Et(e.properties);case"move_node":return bn.isPath(e.path)&&bn.isPath(e.newPath);case"set_node":return bn.isPath(e.path)&&Et(e.properties)&&Et(e.newProperties);case"set_selection":return null===e.properties&&Mn.isRange(e.newProperties)||null===e.newProperties&&Mn.isRange(e.properties)||Et(e.properties)&&Et(e.newProperties);case"split_node":return bn.isPath(e.path)&&"number"==typeof e.position&&Et(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&e.every((e=>Wn.isOperation(e))),isSelectionOperation:e=>Wn.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>Wn.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return Vn(Vn({},e),{},{type:"remove_node"});case"insert_text":return Vn(Vn({},e),{},{type:"remove_text"});case"merge_node":return Vn(Vn({},e),{},{type:"split_node",path:bn.previous(e.path)});case"move_node":var{newPath:t,path:n}=e;if(bn.equals(t,n))return e;if(bn.isSibling(n,t))return Vn(Vn({},e),{},{path:t,newPath:n});var r=bn.transform(n,e),o=bn.transform(bn.next(n),e);return Vn(Vn({},e),{},{path:r,newPath:o});case"remove_node":return Vn(Vn({},e),{},{type:"insert_node"});case"remove_text":return Vn(Vn({},e),{},{type:"insert_text"});case"set_node":var{properties:i,newProperties:a}=e;return Vn(Vn({},e),{},{properties:a,newProperties:i});case"set_selection":var{properties:s,newProperties:c}=e;return Vn(Vn({},e),{},null==s?{properties:c,newProperties:null}:null==c?{properties:null,newProperties:s}:{properties:c,newProperties:s});case"split_node":return Vn(Vn({},e),{},{type:"merge_node",path:bn.next(e.path)})}}},In=new WeakMap,Hn={above:(e,t)=>e.above(t),addMark(e,t,n){e.addMark(t,n)},after:(e,t,n)=>e.after(t,n),before:(e,t,n)=>e.before(t,n),deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges:(e,t)=>e.edges(t),elementReadOnly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.elementReadOnly(t)},end:(e,t)=>e.end(t),first:(e,t)=>e.first(t),fragment:(e,t)=>e.fragment(t),hasBlocks:(e,t)=>e.hasBlocks(t),hasInlines:(e,t)=>e.hasInlines(t),hasPath:(e,t)=>e.hasPath(t),hasTexts:(e,t)=>e.hasTexts(t),insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>e.isBlock(t),isEdge:(e,t,n)=>e.isEdge(t,n),isEditor:e=>(e=>{var t=In.get(e);if(void 0!==t)return t;if(!Et(e))return!1;var n="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertSoftBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isElementReadOnly&&"function"==typeof e.isInline&&"function"==typeof e.isSelectable&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&"function"==typeof e.getDirtyPaths&&(null===e.marks||Et(e.marks))&&(null===e.selection||Mn.isRange(e.selection))&&qn.isNodeList(e.children)&&Wn.isOperationList(e.operations);return In.set(e,n),n})(e),isElementReadOnly:(e,t)=>e.isElementReadOnly(t),isEmpty:(e,t)=>e.isEmpty(t),isEnd:(e,t,n)=>e.isEnd(t,n),isInline:(e,t)=>e.isInline(t),isNormalizing:e=>e.isNormalizing(),isSelectable:(e,t)=>e.isSelectable(t),isStart:(e,t,n)=>e.isStart(t,n),isVoid:(e,t)=>e.isVoid(t),last:(e,t)=>e.last(t),leaf:(e,t,n)=>e.leaf(t,n),levels:(e,t)=>e.levels(t),marks:e=>e.getMarks(),next:(e,t)=>e.next(t),node:(e,t,n)=>e.node(t,n),nodes:(e,t)=>e.nodes(t),normalize(e,t){e.normalize(t)},parent:(e,t,n)=>e.parent(t,n),path:(e,t,n)=>e.path(t,n),pathRef:(e,t,n)=>e.pathRef(t,n),pathRefs:e=>e.pathRefs(),point:(e,t,n)=>e.point(t,n),pointRef:(e,t,n)=>e.pointRef(t,n),pointRefs:e=>e.pointRefs(),positions:(e,t)=>e.positions(t),previous:(e,t)=>e.previous(t),range:(e,t,n)=>e.range(t,n),rangeRef:(e,t,n)=>e.rangeRef(t,n),rangeRefs:e=>e.rangeRefs(),removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start:(e,t)=>e.start(t),string:(e,t,n)=>e.string(t,n),unhangRange:(e,t,n)=>e.unhangRange(t,n),void:(e,t)=>e.void(t),withoutNormalizing(e,t){e.withoutNormalizing(t)}};function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $n={compare(e,t){var n=bn.compare(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter:(e,t)=>1===$n.compare(e,t),isBefore:(e,t)=>-1===$n.compare(e,t),equals:(e,t)=>e.offset===t.offset&&bn.equals(e.path,t.path),isPoint:e=>Et(e)&&"number"==typeof e.offset&&bn.isPath(e.path),transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return vn(e,(e=>{if(null===e)return null;var{affinity:r="forward"}=n,{path:o,offset:i}=e;switch(t.type){case"insert_node":case"move_node":e.path=bn.transform(o,t,n);break;case"insert_text":bn.equals(t.path,o)&&(t.offset<i||t.offset===i&&"forward"===r)&&(e.offset+=t.text.length);break;case"merge_node":bn.equals(t.path,o)&&(e.offset+=t.position),e.path=bn.transform(o,t,n);break;case"remove_text":bn.equals(t.path,o)&&t.offset<=i&&(e.offset-=Math.min(i-t.offset,t.text.length));break;case"remove_node":if(bn.equals(t.path,o)||bn.isAncestor(t.path,o))return null;e.path=bn.transform(o,t,n);break;case"split_node":if(bn.equals(t.path,o)){if(t.position===i&&null==r)return null;(t.position<i||t.position===i&&"forward"===r)&&(e.offset-=t.position,e.path=bn.transform(o,t,Kn(Kn({},n),{},{affinity:"forward"})))}else e.path=bn.transform(o,t,n)}}))}},Jn=void 0,Un={setScrubber(e){Jn=e},stringify:e=>JSON.stringify(e,Jn)},Xn=["text"],Yn=["anchor","focus"];function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var er,tr={equals(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:r=!1}=n;function o(e){return Cn(e,Xn)}return Rn(r?o(e):e,r?o(t):t)},isText:e=>Et(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&e.every((e=>tr.isText(e))),isTextProps:e=>void 0!==e.text,matches(e,t){for(var n in t)if("text"!==n&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[Qn({},e)];for(var r of t){var o=Cn(r,Yn),[i,a]=Mn.edges(r),s=[],c=0,l=i.offset,u=a.offset;for(var f of n){var{length:d}=f.text,p=c;if(c+=d,l<=p&&c<=u)Object.assign(f,o),s.push(f);else if(l!==u&&(l===c||u===p)||l>c||u<p||u===p&&0!==p)s.push(f);else{var h=f,g=void 0,m=void 0;if(u<c){var v=u-p;m=Qn(Qn({},h),{},{text:h.text.slice(v)}),h=Qn(Qn({},h),{},{text:h.text.slice(0,v)})}if(l>p){var y=l-p;g=Qn(Qn({},h),{},{text:h.text.slice(0,y)}),h=Qn(Qn({},h),{},{text:h.text.slice(y)})}Object.assign(h,o),g&&s.push(g),s.push(h),m&&s.push(m)}}n=s}return n}},nr=e=>e.selection?e.selection:e.children.length>0?Hn.end(e,[]):[0];!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(er||(er={})),er.L,er.L,er.V,er.LV,er.LVT,er.LV,er.V,er.V,er.T,er.LVT,er.T,er.T,er.Any,er.Extend,er.ZWJ,er.Any,er.SpacingMark,er.Prepend,er.Any,er.ZWJ,er.ExtPict,er.RI,er.RI;var rr={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Hn.withoutNormalizing(e,(()=>{var{voids:r=!1}=n,{at:o=nr(e)}=n;if(bn.isPath(o)&&(o=Hn.range(e,o)),Mn.isRange(o))if(Mn.isCollapsed(o))o=o.anchor;else{var i=Mn.end(o);if(!r&&Hn.void(e,{at:i}))return;var a=Mn.start(o),s=Hn.pointRef(e,a),c=Hn.pointRef(e,i);ar.delete(e,{at:o,voids:r});var l=s.unref(),u=c.unref();o=l||u,ar.setSelection(e,{anchor:o,focus:o})}if(!(!r&&Hn.void(e,{at:o})||Hn.elementReadOnly(e,{at:o}))){var{path:f,offset:d}=o;t.length>0&&e.apply({type:"insert_text",path:f,offset:d,text:t})}}))}};function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=ir(ir(ir(ir({},jn),En),Sn),rr);function sr(e,t){return t.map((t=>{var n,r,o,i,a,s;if("string"==typeof t){return{type:t,title:(null===(r=null===(n=e.blocks[t].options)||void 0===n?void 0:n.display)||void 0===r?void 0:r.title)||t,description:null===(i=null===(o=e.blocks[t].options)||void 0===o?void 0:o.display)||void 0===i?void 0:i.description,icon:null===(s=null===(a=e.blocks[t].options)||void 0===a?void 0:a.display)||void 0===s?void 0:s.icon}}return t}))}function cr({editor:e,onClose:t,onMouseEnter:n=(()=>{}),empty:r=!1,mode:o="toggle",view:i="default",selectedAction:a}){return{actions:(()=>{let t=Object.keys(e.blocks);return"toggle"===o&&(t=t.filter((t=>function(e,t){var n;const r=e.blocks[t];if(!r)return!1;const o=u(r.elements);return"void"!==(null===(n=null==o?void 0:o.props)||void 0===n?void 0:n.nodeType)}(e,t)))),sr(e,t)})(),onClose:t,empty:r,getItemProps:r=>({onMouseEnter:n,"data-action-menu-item":!0,"data-action-menu-item-type":r,"aria-selected":r===(null==a?void 0:a.type),onClick:()=>{e.toggleBlock(r,{deleteText:"create"===o,focus:!0}),t()}}),getRootProps:()=>({"data-action-menu-list":!0}),editor:e,view:i}}const{Portal:lr}=p,ur=(e,t,n)=>{if(!e||void 0===e[n])return!1;const r=e[n],o=t.toLowerCase().trim();return Array.isArray(r)?r.filter(Boolean).map((e=>String(e).toLowerCase())).some((e=>e.includes(o))):String(r).toLowerCase().includes(o)};const fr=({items:t,render:r})=>{const o=f(),[i,s]=c(!1),{refs:l,floatingStyles:u,update:p,context:m}=_t({placement:"bottom-start",open:i,onOpenChange:s,middleware:[at(),it(),ot(10)],whileElementsMounted:rt}),{isMounted:v,styles:y}=function(e,t){void 0===t&&(t={});const{initial:r={opacity:0},open:o,close:i,common:a,duration:s=250}=t,c=e.placement,l=c.split("-")[0],u=n.useMemo((()=>({side:l,placement:c})),[l,c]),f="number"==typeof s,d=(f?s:s.open)||0,p=(f?s:s.close)||0,[h,g]=n.useState((()=>({...kt(a,u),...kt(r,u)}))),{isMounted:m,status:v}=Pt(e,{duration:s}),y=xt(r),w=xt(o),b=xt(i),x=xt(a);return ht((()=>{const e=kt(y.current,u),t=kt(b.current,u),n=kt(x.current,u),r=kt(w.current,u)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===v&&g((t=>({transitionProperty:t.transitionProperty,...n,...e}))),"open"===v&&g({transitionProperty:Object.keys(r).map(Ot).join(","),transitionDuration:d+"ms",...n,...r}),"close"===v){const r=t||e;g({transitionProperty:Object.keys(r).map(Ot).join(","),transitionDuration:p+"ms",...n,...r})}}),[p,b,y,w,x,d,v,u]),{isMounted:m,styles:h}}(m,{duration:100}),w=sr(o,t||Object.keys(o.blocks)),[b,x]=c(w[0]),[_,O]=c(w),k=()=>s(!1),P=({text:e})=>{const t=e.trim().replace("/","");if(!t)return void O(w);const n=w.filter((e=>((e,t)=>!t.trim()||!!e&&t.toLowerCase().split(/\s+/).every((t=>{var n,r,o;return!!ur(e,t,"type")||(!(!(null===(n=e.options)||void 0===n?void 0:n.display)||!ur(e.options.display,t,"title"))||(!(!e.options||!ur(e.options,t,"shortcuts"))||(!(!(null===(r=e.options)||void 0===r?void 0:r.display)||!ur(e.options.display,t,"description"))||!(!(null===(o=e.options)||void 0===o?void 0:o.aliases)||!ur(e.options,t,"aliases")))))})))(o.blocks[e.type],t)));if(n.length>0){n.some((e=>e.type===(null==b?void 0:b.type)))||x(n[0])}O(n)};a((()=>{var e;p();const t=e=>{var t;const n=h.getBlockSlate(o,{at:o.path.current}),r=null===(t=o.refElement)||void 0===t?void 0:t.contains(e.target);if(!n||!n.selection||!r)return;const a=bn.parent(n.selection.anchor.path),s=Hn.string(n,a);if(0===s.length||!i)return k();P({text:s})},n=e=>{if(e.isComposing)return;const t=h.getBlockSlate(o,{at:o.path.current}),n=e.currentTarget,r=null==n?void 0:n.contains(e.target),a=document.querySelector("[data-custom-editor]");if((null==a?void 0:a.contains(e.target))||!t||!t.selection||!r)return;const c=function(e){return"/"===e.key||191===e.keyCode||191===e.which||"Slash"===e.code||"/"===e.key||"."===e.key&&e.shiftKey}(e);if(c||g.isSlashCommand(e)){if(!(t.selection&&!Hn.isEditor(t.selection.anchor.path[0])))return;const e=bn.parent(t.selection.anchor.path),n=Hn.string(t,e);if(!Hn.isStart(t,t.selection.anchor,t.selection.focus)||n.trim().length>0)return;const r=window.getSelection();if(!r)return;const o=r.getRangeAt(0),i=o.getBoundingClientRect();o&&(l.setReference({getBoundingClientRect:()=>i,getClientRects:()=>o.getClientRects()}),s(!0))}if(i)if(g.isTab(e))e.preventDefault();else{if(g.isArrowUp(e)){e.preventDefault();if(!(b||_[0]))return;const t=document.querySelector("[data-action-menu-list]"),n=null==t?void 0:t.querySelectorAll("[data-action-menu-item]");if(!n)return;const r=null==t?void 0:t.querySelector('[aria-selected="true"]'),o=n[Array.from(n||[]).indexOf(r)-1];if(!o){const e=n[n.length-1],t=e.getAttribute("data-action-menu-item-type");e.scrollIntoView({block:"nearest"});const r=_.find((e=>e.type===t));return x(r)}o.scrollIntoView({block:"nearest"});const i=o.getAttribute("data-action-menu-item-type"),a=_.find((e=>e.type===i));return x(a)}if(g.isArrowDown(e)){e.preventDefault();if(!(b||_[0]))return;const t=document.querySelector("[data-action-menu-list]"),n=null==t?void 0:t.querySelectorAll("[data-action-menu-item]");if(!n)return;const r=null==t?void 0:t.querySelector('[aria-selected="true"]'),o=n[Array.from(n||[]).indexOf(r)+1];if(!o){const e=n[0],t=e.getAttribute("data-action-menu-item-type");e.scrollIntoView({block:"nearest"});const r=_.find((e=>e.type===t));return x(r)}o.scrollIntoView({block:"nearest"});const i=o.getAttribute("data-action-menu-item-type"),a=_.find((e=>e.type===i));return x(a)}if(g.isArrowLeft(e))e.preventDefault();else if(g.isArrowRight(e))e.preventDefault();else{if(g.isBackspace(e)){if(!t.selection)return;if(Hn.isStart(t,t.selection.anchor,t.selection.focus))return k()}if(g.isEscape(e))return e.preventDefault(),void k();if(g.isEnter(e)){e.preventDefault();const n=document.querySelector("[data-action-menu-item][aria-selected=true]"),r=null==n?void 0:n.dataset.actionMenuItemType;if(!r)return;const i=Hn.above(t,{match:e=>Nn.isElement(e)&&Hn.isBlock(t,e),mode:"lowest"});if(i){const[,e]=i,n=i?e:[],r=Hn.start(t,n),o={anchor:t.selection.anchor,focus:r};ar.select(t,o),ar.delete(t)}return o.toggleBlock(r,{deleteText:!0,focus:!0}),k()}}}};if(i&&document.addEventListener("click",k),"number"==typeof o.path.current){const r=d(o,{at:o.path.current});if(!r)return;const i=null===(e=o.refElement)||void 0===e?void 0:e.querySelector(`[data-yoopta-block-id="${r.id}"] [data-slate-editor="true"]`);if(!i)return;return i.addEventListener("keydown",n),i.addEventListener("keyup",t),()=>{i.removeEventListener("keydown",n),i.removeEventListener("keyup",t),document.removeEventListener("click",k)}}}),[_,i,o.path]);const j=0===_.length,E=cr({empty:j,editor:o,onClose:k,onMouseEnter:e=>{const t=e.currentTarget.getAttribute("data-action-menu-item-type"),n=w.find((e=>e.type===t));x(n)},selectedAction:b,view:"default",mode:"create"});a((()=>{let e=setTimeout((()=>{j&&k()}),3e3);return()=>clearTimeout(e)}),[_.length,i]);const S=Object.assign(Object.assign({},u),y);return e(lr,r?Object.assign({id:"yoo-action-menu-list-portal"},{children:v&&e("div",Object.assign({className:"yoopta-action-menu-list",style:S,ref:l.setFloating},{children:r(Object.assign(Object.assign({},E),{actions:_}))}))}):Object.assign({id:"yoo-action-menu-list-portal"},{children:v&&e("div",Object.assign({className:"yoopta-action-menu-list",style:S,ref:l.setFloating},{children:e(ne,Object.assign({},E,{actions:_}))}))}))};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".yoo-action-menu-mb-0{margin-bottom:0}.yoo-action-menu-mb-0\\.5{margin-bottom:.125rem}.yoo-action-menu-flex{display:flex}.yoo-action-menu-h-\\[40px\\]{height:40px}.yoo-action-menu-max-h-\\[300px\\]{max-height:300px}.yoo-action-menu-w-\\[40px\\]{width:40px}.yoo-action-menu-w-full{width:100%}.yoo-action-menu-max-w-\\[200px\\]{max-width:200px}.yoo-action-menu-cursor-pointer{cursor:pointer}.yoo-action-menu-items-center{align-items:center}.yoo-action-menu-justify-center{justify-content:center}.yoo-action-menu-space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.yoo-action-menu-overflow-hidden{overflow:hidden}.yoo-action-menu-overflow-y-auto{overflow-y:auto}.yoo-action-menu-overflow-x-hidden{overflow-x:hidden}.yoo-action-menu-truncate{overflow:hidden;white-space:nowrap}.yoo-action-menu-text-ellipsis,.yoo-action-menu-truncate{text-overflow:ellipsis}.yoo-action-menu-rounded-md{border-radius:.375rem}.yoo-action-menu-border{border-width:1px}.yoo-action-menu-border-solid{border-style:solid}.yoo-action-menu-border-\\[\\#e5e7eb\\]{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.yoo-action-menu-bg-\\[\\#FFFFFF\\]{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.yoo-action-menu-p-0{padding:0}.yoo-action-menu-px-1{padding-left:.25rem;padding-right:.25rem}.yoo-action-menu-py-1{padding-bottom:.25rem;padding-top:.25rem}.yoo-action-menu-text-left{text-align:left}.yoo-action-menu-text-sm{font-size:.875rem;line-height:1.25rem}.yoo-action-menu-text-xs{font-size:.75rem;line-height:1rem}.yoo-action-menu-font-medium{font-weight:500}.yoopta-action-menu-list{bottom:auto;left:0;margin:0;position:absolute;right:auto;top:0;z-index:9999}.yoopta-action-menu-list-content{--tw-border-opacity:1;--tw-bg-opacity:1;--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);background-color:rgb(255 255 255/var(--tw-bg-opacity));border-color:rgb(229 231 235/var(--tw-border-opacity));border-radius:.375rem;border-style:solid;border-width:1px;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);height:auto;max-height:330px;overflow-y:auto;padding:.5rem .25rem;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);width:18rem;z-index:50}.last\\:yoo-action-menu-mb-0:last-child{margin-bottom:0}.hover\\:yoo-action-menu-bg-\\[\\#f4f4f5\\]:hover{--tw-bg-opacity:1;background-color:rgb(244 244 245/var(--tw-bg-opacity))}.aria-selected\\:yoo-action-menu-bg-\\[\\#f0f0f0\\][aria-selected=true]{--tw-bg-opacity:1;background-color:rgb(240 240 240/var(--tw-bg-opacity))}");export{ne as DefaultActionMenuRender,cr as buildActionMenuRenderProps,fr as default};
